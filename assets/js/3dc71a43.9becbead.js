"use strict";(self.webpackChunkwi_znet_documentation=self.webpackChunkwi_znet_documentation||[]).push([[9864],{3905:(t,l,e)=>{e.d(l,{Zo:()=>c,kt:()=>b});var r=e(67294);function n(t,l,e){return l in t?Object.defineProperty(t,l,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[l]=e,t}function s(t,l){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);l&&(r=r.filter((function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),e.push.apply(e,r)}return e}function a(t){for(var l=1;l<arguments.length;l++){var e=null!=arguments[l]?arguments[l]:{};l%2?s(Object(e),!0).forEach((function(l){n(t,l,e[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):s(Object(e)).forEach((function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(e,l))}))}return t}function o(t,l){if(null==t)return{};var e,r,n=function(t,l){if(null==t)return{};var e,r,n={},s=Object.keys(t);for(r=0;r<s.length;r++)e=s[r],l.indexOf(e)>=0||(n[e]=t[e]);return n}(t,l);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)e=s[r],l.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(n[e]=t[e])}return n}var k=r.createContext({}),u=function(t){var l=r.useContext(k),e=l;return t&&(e="function"==typeof t?t(l):a(a({},l),t)),e},c=function(t){var l=u(t.components);return r.createElement(k.Provider,{value:l},t.children)},i={inlineCode:"code",wrapper:function(t){var l=t.children;return r.createElement(r.Fragment,{},l)}},d=r.forwardRef((function(t,l){var e=t.components,n=t.mdxType,s=t.originalType,k=t.parentName,c=o(t,["components","mdxType","originalType","parentName"]),d=u(e),b=n,p=d["".concat(k,".").concat(b)]||d[b]||i[b]||s;return e?r.createElement(p,a(a({ref:l},c),{},{components:e})):r.createElement(p,a({ref:l},c))}));function b(t,l){var e=arguments,n=l&&l.mdxType;if("string"==typeof t||n){var s=e.length,a=new Array(s);a[0]=d;var o={};for(var k in l)hasOwnProperty.call(l,k)&&(o[k]=l[k]);o.originalType=t,o.mdxType="string"==typeof t?t:n,a[1]=o;for(var u=2;u<s;u++)a[u]=e[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,e)}d.displayName="MDXCreateElement"},10276:(t,l,e)=>{e.r(l),e.d(l,{assets:()=>k,contentTitle:()=>a,default:()=>i,frontMatter:()=>s,metadata:()=>o,toc:()=>u});var r=e(87462),n=(e(67294),e(3905));const s={id:"flash",title:"Embedded Flash memory",date:new Date("2020-06-10T00:00:00.000Z")},a=void 0,o={unversionedId:"Product/iMCU/W7500/Peripherals-internal/flash",id:"Product/iMCU/W7500/Peripherals-internal/flash",title:"Embedded Flash memory",description:"Flash main features",source:"@site/docs/Product/iMCU/W7500/Peripherals-internal/flash.md",sourceDirName:"Product/iMCU/W7500/Peripherals-internal",slug:"/Product/iMCU/W7500/Peripherals-internal/flash",permalink:"/Product/iMCU/W7500/Peripherals-internal/flash",draft:!1,editUrl:"https://github.com/Wiznet/document_framework/tree/master/docs/Product/iMCU/W7500/Peripherals-internal/flash.md",tags:[],version:"current",frontMatter:{id:"flash",title:"Embedded Flash memory",date:"2020-06-10T00:00:00.000Z"},sidebar:"docs",previous:{title:"External Interrupt (EXTI)",permalink:"/Product/iMCU/W7500/Peripherals-internal/exti"},next:{title:"UART Hardware Control example",permalink:"/Product/iMCU/W7500/Peripherals-internal/flowcontrol"}},k={},u=[{value:"Flash main features",id:"flash-main-features",level:2},{value:"Flash memory functional description",id:"flash-memory-functional-description",level:2},{value:"Flash memory organization",id:"flash-memory-organization",level:3}],c={toc:u};function i(t){let{components:l,...e}=t;return(0,n.kt)("wrapper",(0,r.Z)({},c,e,{components:l,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"flash-main-features"},"Flash main features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Up to 128Kbytes of Flash memory"),(0,n.kt)("li",{parentName:"ul"},"Memory organization:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Main Flash memory block:",(0,n.kt)("br",{parentName:"li"}),"Up to 128Kbytes"),(0,n.kt)("li",{parentName:"ul"},"Information block:",(0,n.kt)("br",{parentName:"li"}),"Up to 512bytes",(0,n.kt)("br",{parentName:"li"}),"Information block is read only"),(0,n.kt)("li",{parentName:"ul"},"Data block:",(0,n.kt)("br",{parentName:"li"}),"Up to 512bytes"))),(0,n.kt)("li",{parentName:"ul"},"Flash memory interface features:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Read interface with prefetch buffer( 1 x 32-bit words )"),(0,n.kt)("li",{parentName:"ul"},"Flash Program / Erase operation"),(0,n.kt)("li",{parentName:"ul"},"Read / Write protection")))),(0,n.kt)("h2",{id:"flash-memory-functional-description"},"Flash memory functional description"),(0,n.kt)("h3",{id:"flash-memory-organization"},"Flash memory organization"),(0,n.kt)("p",null,"The Flash memory is organized of 32-bit wide memory cells that can be used for storing both code and data constants.\nThe memory organization is based on a main Flash memory block containing 512 sectors of 256byte or 32 blocks of 4Kbyte. The block and sector provides read/write protection."),(0,n.kt)("table",{class:"tg"},(0,n.kt)("tr",null,(0,n.kt)("th",{class:"tg-huh2"},"Flash area",(0,n.kt)("br",null),"  "),(0,n.kt)("th",{class:"tg-s6z2"},"Flash memory address",(0,n.kt)("br",null),"  "),(0,n.kt)("th",{class:"tg-s6z2"},"Size (bytes)",(0,n.kt)("br",null),"  "),(0,n.kt)("th",{class:"tg-huh2"},"Name"),(0,n.kt)("th",{class:"tg-s6z2"},"Description",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2",rowspan:"18"},"M",(0,n.kt)("br",null),"a",(0,n.kt)("br",null),"i",(0,n.kt)("br",null),"n",(0,n.kt)("br",null)," ",(0,n.kt)("br",null),"F",(0,n.kt)("br",null),"l",(0,n.kt)("br",null),"a",(0,n.kt)("br",null),"s",(0,n.kt)("br",null),"h",(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),"  m",(0,n.kt)("br",null),"e",(0,n.kt)("br",null),"m",(0,n.kt)("br",null),"o",(0,n.kt)("br",null),"r",(0,n.kt)("br",null),"y",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"0x0000 0000 ~ 0x0000 00FF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector 0",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2",rowspan:"6"},"Block 0",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0000 0100 ~ 0x0000 01FF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector 1",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0000 0200 ~ 0x0000 02FF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector 2",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0000 0E00 ~ 0x0000 0EFF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector 14",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0000 0F00 ~ 0x0000 0FFF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector 15",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0000 7000 ~ 0x0000 70FF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector128",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2",rowspan:"5"},"Block 7",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0000 7100 ~ 0x0000 71FF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector129",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0000 7E00 ~ 0x0000 7EFF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector142",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0000 7F00 ~ 0x0000 7FFF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector143",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0001 F000 ~ 0x0001 F0FF ",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector496",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2",rowspan:"5"},"Block 31",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0001 F100 ~ 0x0001 F1FF",(0,n.kt)("br",null)),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector497",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},". . .",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0001 FE00 ~ 0x0001 FEFF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector510",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0001 FF00 ~ 0x0001 FFFF ",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Sector511",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2",rowspan:"2"},(0,n.kt)("br",null),"  Information",(0,n.kt)("br",null),"  block",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"0x0003 FC00 ~ 0x0003 FCFF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"}," ",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"Lock info",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0003 FD00 ~ 0x0003 FDFF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2",colspan:"3"},"Reserved",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2",rowspan:"2"},(0,n.kt)("br",null),"  Data block",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"0x0003 FE00 ~ 0x0003 FEFF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"}),(0,n.kt)("td",{class:"tg-s6z2"},"Data0",(0,n.kt)("br",null),"  ")),(0,n.kt)("tr",null,(0,n.kt)("td",{class:"tg-s6z2"},"0x0003 FF00 ~ 0x0003 FFFF",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"},"256",(0,n.kt)("br",null),"  "),(0,n.kt)("td",{class:"tg-s6z2"}),(0,n.kt)("td",{class:"tg-s6z2"},"Data1",(0,n.kt)("br",null),"  "))),(0,n.kt)("p",null,"The W7500 embedded Flash memory can be programmed using in-application programming.\nIAP allows the user to re-program\nthe Flash memory while the application is running.\nThe program and erase operations can be performed over the whole product voltage range."),(0,n.kt)("p",null,"In W7500x_Library_Examples, there is the IAP Example Project and the below function is supported to use IAP."),(0,n.kt)("p",null,"void DO_IAP( uint32_t id, uint32_t dst_addr, uint8_t* src_addr, uint32_t size);"),(0,n.kt)("p",null,"This function requests those parameters, id, dst_addr, src_addr and size.\n'id' is already defined in 'main.c'. 'dst_addr' is the flash memory address in the upper table.\n'src_addr' is the buffer pointer user want to program. 'size' is the flash size user chooses.\nPlease refer flash address and size mentioned in the upper table."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-cpp"},"// IAP 'id' paremeter define\n#define IAP_ENTRY           0x1FFF1001     // Because Thum code\n#define IAP_ERAS            0x010\n#define IAP_ERAS_DAT0       (IAP_ERAS + 0) // Erase Data 0 block\n#define IAP_ERAS_DAT1       (IAP_ERAS + 1) // Erase Data 1 block\n#define IAP_ERAS_SECT       (IAP_ERAS + 2) // Erase a Sector in Main Flash Memory \n#define IAP_ERAS_BLCK       (IAP_ERAS + 3) // Erase a Block in Main Flash Memory \n#define IAP_ERAS_CHIP       (IAP_ERAS + 4) // Erase all code\n#define IAP_ERAS_MASS       (IAP_ERAS + 5) // Erase all code & data\n#define IAP_PROG            0x022\n")),(0,n.kt)("p",null,"This is how to Erase and Program flash memory. Especially, with IAP_ERAS_DAT0 and IAP_ERAS_DAT1,\nthere is no need to put other parameters (there are default values)."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-cpp"},"// Step 1 DATA0 Erase, Read, Write Test\nDO_IAP(IAP_ERAS_DAT0,0,0,0);\nDO_IAP(IAP_PROG,DAT0_START_ADDR,buffer,SECT_SIZE);\n")),(0,n.kt)("p",null,"Operating program can be deleted when user use 'IAP_ERAS_CHIP' or 'IAP_ERAS_MASS'."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-cpp"},"// Using IAP_ERAS_CHIP or IAP_ERAS_MASS\nDO_IAP(IAP_ERAS_CHIP,0,0,0);\nDO_IAP(IAP_ERAS_MASS,0,0,0);\n")))}i.isMDXComponent=!0}}]);